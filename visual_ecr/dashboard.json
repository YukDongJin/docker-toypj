{
  "__inputs": [
    {
      "name": "DS_VMS",
      "label": "vm_metrics",
      "description": "",
      "type": "datasource",
      "pluginId": "influxdb",
      "pluginName": "InfluxDB"
    }
  ],
  "__requires": [
    {
      "type": "grafana",
      "id": "grafana",
      "name": "Grafana",
      "version": "10.0.0"
    },
    {
      "type": "panel",
      "id": "graph",
      "name": "Graph",
      "version": ""
    },
    {
      "type": "datasource",
      "id": "influxdb",
      "name": "InfluxDB",
      "version": "1.0.0"
    },
    {
      "type": "panel",
      "id": "stat",
      "name": "Stat",
      "version": ""
    }
  ],
  "annotations": {
    "list": []
  },
  "editable": true,
  "gnetId": null,
  "graphTooltip": 0,
  "id": null,
  "links": [],
  "refresh": "10s",
  "rows": [
    {
      "collapse": false,
      "height": 200,
      "panels": [
        {
          "title": "CPU Usage (%)",
          "type": "graph",
          "datasource": "vm_metrics",
          "targets": [
            {
              "measurement": "cpu_vm",
              "groupBy": [
                { "type": "time", "params": ["$__interval"] },
                { "type": "tag", "params": ["host"] },
                { "type": "fill", "params": ["null"] }
              ],
              "select": [
                [
                  { "type": "field", "params": ["usage_system"] },
                  { "type": "mean", "params": [] }
                ]
              ],
              "resultFormat": "time_series",
              "refId": "A"
            }
          ],
          "lines": true,
          "fill": 1,
          "linewidth": 1,
          "legend": {
            "show": true,
            "current": true,
            "avg": true
          },
          "yaxes": [
            { "format": "percent", "show": true },
            { "format": "short", "show": true }
          ]
        },
        {
          "title": "Memory Usage (bytes)",
          "type": "graph",
          "datasource": "vm_metrics",
          "targets": [
            {
              "measurement": "mem_vm",
              "groupBy": [
                { "type": "time", "params": ["$__interval"] },
                { "type": "fill", "params": ["null"] }
              ],
              "select": [
                [
                  { "type": "field", "params": ["used"] },
                  { "type": "mean", "params": [] }
                ]
              ],
              "resultFormat": "time_series",
              "refId": "A"
            }
          ],
          "lines": true,
          "fill": 1,
          "linewidth": 1,
          "legend": {
            "show": true,
            "current": true,
            "avg": true
          },
          "yaxes": [
            { "format": "bytes", "show": true },
            { "format": "short", "show": true }
          ]
        },
        {
          "title": "Disk Usage (bytes)",
          "type": "graph",
          "datasource": "vm_metrics",
          "targets": [
            {
              "measurement": "disk_vm",
              "groupBy": [
                { "type": "time", "params": ["$__interval"] },
                { "type": "tag", "params": ["host"] },
                { "type": "fill", "params": ["null"] }
              ],
              "select": [
                [
                  { "type": "field", "params": ["used"] },
                  { "type": "mean", "params": [] }
                ]
              ],
              "resultFormat": "time_series",
              "refId": "A"
            }
          ],
          "lines": true,
          "fill": 1,
          "linewidth": 1,
          "legend": {
            "show": true,
            "current": true,
            "avg": true
          },
          "yaxes": [
            { "format": "bytes", "show": true },
            { "format": "short", "show": true }
          ]
        },
        {
          "title": "System Load (1m)",
          "type": "graph",
          "datasource": "vm_metrics",
          "targets": [
            {
              "measurement": "system_vm",
              "groupBy": [
                { "type": "time", "params": ["$__interval"] },
                { "type": "tag", "params": ["host"] },
                { "type": "fill", "params": ["null"] }
              ],
              "select": [
                [
                  { "type": "field", "params": ["load1"] },
                  { "type": "mean", "params": [] }
                ]
              ],
              "resultFormat": "time_series",
              "refId": "A"
            }
          ],
          "lines": true,
          "fill": 1,
          "linewidth": 1,
          "legend": {
            "show": true,
            "current": true,
            "avg": true
          },
          "yaxes": [
            { "format": "short", "show": true },
            { "format": "short", "show": true }
          ]
        }
      ]
    }
  ],
  "schemaVersion": 14,
  "style": "dark",
  "tags": ["ecs", "telegraf", "vm"],
  "templating": { "list": [] },
  "time": { "from": "now-1h", "to": "now" },
  "timezone": "browser",
  "title": "ECS VM Metrics Dashboard",
  "version": 1
}
